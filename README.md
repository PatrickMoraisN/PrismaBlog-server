![banner](src/assets/prisma_banner.png)
<br />

# :pushpin: Index
- [Database](#package-database)
- [Rules](#scroll-rules)
- [Routes](#mailbox_closed-routes)
- [Media](#camera_flash-media)
- [About](#monocle_face-about)
- [Technologies](#rocket-technologies)
- [Instalation](#hammer_and_wrench-instalation)
- [Author](#closed_book-author)
<br />

---

# :package: Database

The database used was PostgreSQL with Prisma ORM.

The data structure was designed like this:

![Image](src/assets/prismaBlogBD.png)

---

# :scroll: Rules

- ### User registration
  - It is not allowed to register more than one user with the same email.
  - It is not allowed to register a user without an email.
  - It is not allowed to register a user without a name.
  - It is not allowed to register a user without a password.

- ### Post creation
  - It is not allowed to register more than one tag with the same name.
  - It is not allowed to create an post without a title.
  - It is not allowed to create an post without a body.
  - The user must be authenticated in the application.

---

# :mailbox_closed: Routes

  - ### Post
    `/register` User registration. <br><br>
    `/login` Logs into the application and generates a JWT token. <br><br>
    `/create/post` Create a new post (Must be authenticated).<br><br>

  - ### Get
    `/posts` List all posts (Must be authenticated).<br><br>
    `/posts/:id` List posts from a specific user (Must be authenticated).<br><br>

  - ### Delete
    `/post` Delete a post (Must be authenticated).<br><br>

---

# :camera_flash: Media

Answer examples: <br>

- Creating a user <br>
***OBS*** _The `id` field was generated by the `uuid` lib using the random hash type `v4`_ <br>
![Image](src/assets/create_user.png)

- Creating a post <br>
***OBS*** _Must be authenticated_ <br>
![Image](src/assets/marquinhos_post.png)

- List all posts <br>
***OBS*** _Must be authenticated_ <br>
![Image](src/assets/all_posts.png)

- Posts from a specific user <br>
***OBS*** _Must be authenticated_ <br>
![Image](src/assets/user_post.png)

---

# :monocle_face: About
This project was made with the intention of practicing Node using Typescript with PostgreSQL and Prisma.

To handle the password received when creating a user, the `bcryptjs` lib was used.

The JWT token verification is done by a middleware.

I hope you like it :)
<br />

---

# :rocket: Technologies
This project was made using the following technologies: <br>
- :heavy_check_mark: **Node**
- :heavy_check_mark: **Express**
- :heavy_check_mark: **Typescript**
- :heavy_check_mark: **Prisma ORM**
- :heavy_check_mark: **PostgreSQL**
- :heavy_check_mark: **JWT Auth**
- :heavy_check_mark: **bcryptjs**
- :heavy_check_mark: **ESLint**
- :heavy_check_mark: **Prettier**
<br><br>
<br />

---

# :hammer_and_wrench: Instalation
**This project involves environment variables, make sure you have them before trying to run!**
**You must have PostgreSQL!**

1. Clone the repository

```bash
git clone git@github.com:PatrickMoraisN/PrismaBlog-server.git
```

2. Change to repository directory

```bash
cd PrismaBlog-server
```

3. Install the dependencies

```bash
npm install
```

4. Create an .env file at the root directory and add environment variables

***OBS*** Must have installed PostgreSQL!

```bash
### PRISMA/POSTGRES
DATABASE_URL="postgresql://postgres:1234@localhost:5432/prismablog?schema=public"

### JWT
JWT_SECRET=your_secret

```

5. Run Prisma Push

```bash
npx prisma db push
```

6. Start backend server

```bash
npm run dev
```

You are all set! Server is running on [localhost:3000](http://localhost:3000/)!

---

# :closed_book: Author
Patrick Morais <br>
[![Linkedin Badge](https://img.shields.io/badge/-Linkedin-6633cc?style=flat-square&logo=Linkedin&logoColor=white&link=https://www.linkedin.com/in/patrick-morais/)](https://www.linkedin.com/in/patrick-morais/)<br>
[![Gmail Badge](https://img.shields.io/badge/-ppternunes@gmail.com-6633cc?style=flat-square&logo=Gmail&logoColor=white&link=mailto:ppternunes@gmail.com)](mailto:ppternunes@gmail.com)<br>
[![GitHub Badge](https://img.shields.io/badge/-Patrick%20Morais-6633cc?style=flat-square&logo=github&logoColor=white)](https://www.github.com/patrickmoraisn/)
